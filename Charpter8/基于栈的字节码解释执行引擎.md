# 基于栈的字节码解释执行引擎
## 解释执行
&emsp;&emsp;Java语言中，Javac编译器完成了程序代码经过词法分析，语法分析到抽象语法树，在遍历语法树生成线性的字节码指令流的过程。因为这一部分动作是在
Java虚拟机之外进行的，而解释器在虚拟机的内部，所以Java程序的编译就是半独立的实现。

## 基于栈的指令集与基于寄存器的指令集
&emsp;&emsp;Java编译器输出的指令流，基本上是一种基于栈的指令集架构，指令流中的指令大部分都是零地址指令，它们依赖操作数栈进行工作。

&emsp;&emsp;基于栈的指令集主要的优点就是可移植，寄存器由硬件直接提供，程序直接依赖这些硬件寄存器则不可避免地受到硬件的约束。

&emsp;&emsp;如果使用栈架构的指令集，用户程序不会直接使用这些寄存器，就可以由虚拟机实现来自行决定把一些访问最频繁的数据放到寄存器中以获取尽量好的性能。另
外栈架构的指令集代码相对更加紧凑，编译器实现更加简单(不需要考虑空间分配的问题，所需空间都在栈上操作)等。

&esmp;&emsp;栈架构指令集的主要缺点是执行速度相对来说会稍慢一些，所有主流物理机的指令集都是寄存器架构也侧面印证了这一点。

&emsp;&emsp;栈架构虽然代码更加紧凑，但是完成相同功能所需的代码量比寄存器架构多，因为出栈、入栈操作本身就占了很多指令数量。频繁的栈访问也就意味着频繁的
内存访问，目前的优化措施是采取栈顶缓存的手段，把最常用的操作映射到寄存器中避免直接内存访问。

## 基于栈的解释器执行过程
&emsp;&emsp;虚拟机中解析器和即时编译器都会对输入的字节码进行优化，在HotSpot虚拟机中，有很多以”fast_"开头的非标准字节码指令用于合并、替换输入的字节码以提升解释执行性能，而即时编译器的优化手段更加花样繁多。
